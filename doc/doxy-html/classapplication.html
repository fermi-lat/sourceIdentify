<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>sourceIdentify: application Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.1 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>application Class Reference</h1><a href="classapplication-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapplication.html#a0">application</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapplication.html#a1">run</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">st_stream::StreamFormatter&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classapplication.html#r0">m_f</a></td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="application::application"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">application::application           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="source_identify_8cxx-source.html#l00048">48</a> of file <a class="el" href="source_identify_8cxx-source.html">sourceIdentify.cxx</a>.
<p>
References <a class="el" href="source_identify_8cxx-source.html#l00141">m_f</a>.<div class="fragment"><pre class="fragment">00048 : <a class="code" href="classapplication.html#r0">m_f</a>(<span class="stringliteral">"application"</span>, <span class="stringliteral">""</span>, 2) {}
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a1" doxytag="application::run"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">virtual void application::run           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="source_identify_8cxx-source.html#l00051">51</a> of file <a class="el" href="source_identify_8cxx-source.html">sourceIdentify.cxx</a>.
<p>
References <a class="el" href="_catalogue_8cxx-source.html#l01977">sourceIdentify::Catalogue::build()</a>, <a class="el" href="_parameters_8cxx-source.html#l00207">sourceIdentify::Parameters::dump()</a>, <a class="el" href="namespacesource_identify.html#a37a11">sourceIdentify::Error_3</a>, <a class="el" href="_parameters_8cxx-source.html#l00098">sourceIdentify::Parameters::load()</a>, <a class="el" href="_log_8cxx-source.html#l00121">sourceIdentify::Log()</a>, <a class="el" href="namespacesource_identify.html#a37a21">sourceIdentify::Log_1</a>, <a class="el" href="_log_8cxx-source.html#l00093">sourceIdentify::LogClose()</a>, <a class="el" href="_log_8cxx-source.html#l00044">sourceIdentify::LogInit()</a>, <a class="el" href="_parameters_8h-source.html#l00078">sourceIdentify::Parameters::logTerse()</a>, <a class="el" href="_catalogue_8cxx-source.html#l02099">sourceIdentify::Catalogue::save()</a>, <a class="el" href="namespacesource_identify.html#a38a24">sourceIdentify::STATUS_OK</a>, <a class="el" href="source_identify_8h-source.html#l00020">TOOL_LOGFILE</a>, <a class="el" href="source_identify_8h-source.html#l00018">TOOL_NAME</a>, and <a class="el" href="source_identify_8h-source.html#l00019">TOOL_VERSION</a>.<div class="fragment"><pre class="fragment">00051                        {
00052 
00053     <span class="comment">// Declare (and initialise) variables</span>
00054     <a class="code" href="namespacesource_identify.html#a38">Status</a>      status = <a class="code" href="namespacesource_identify.html#a38a24">STATUS_OK</a>;
00055     clock_t     t_start;
00056     clock_t     t_stop;
00057     <span class="keywordtype">float</span>       t_elapse;
00058     <a class="code" href="classsource_identify_1_1_parameters.html">Parameters</a>  par;
00059     <a class="code" href="classsource_identify_1_1_catalogue.html">Catalogue</a>   cat;
00060 
00061     <span class="comment">// Main do-loop to fall through in case of an error</span>
00062     <span class="keywordflow">do</span> {
00063 
00064       <span class="comment">// Save the execution start time</span>
00065       t_start = clock();
00066       
00067       <span class="comment">// Initialise log file</span>
00068       status = <a class="code" href="namespacesource_identify.html#a34">LogInit</a>(TOOL_LOGFILE, TOOL_VERSION, status);
00069       <span class="keywordflow">if</span> (status != STATUS_OK)
00070         continue;
00071 
00072       <span class="comment">// Dump header</span>
00073       Log(Log_1, 
00074          "************************************************************");
00075       Log(Log_1, 
00076          "*                sourceIdentify (gtsrcid)                  *");
00077       Log(Log_1, 
00078          "* -------------------------------------------------------- *");
00079       Log(Log_1, 
00080          "* Revision : 1.3.2                                         *");
00081       Log(Log_1, 
00082          "* Date     : 1 February 2006                               *");
00083       Log(Log_1, 
00084          "* Author   : Jurgen Knodlseder (CESR)                      *");
00085       Log(Log_1, 
00086          "************************************************************");
00087 
00088       <span class="comment">// ...</span>
00089       st_app::AppParGroup &amp;pars(getParGroup(TOOL_NAME));
00090 
00091       <span class="comment">// Load task parameters</span>
00092       status = par.load(pars, status);
00093       if (status != STATUS_OK) {
00094         <span class="keywordflow">if</span> (par.<a class="code" href="classsource_identify_1_1_parameters.html#a4">logTerse</a>())
00095           <a class="code" href="namespacesource_identify.html#a36">Log</a>(Error_3, <span class="stringliteral">"%d : Error while loading task parameters."</span>, status);      
00096         <span class="keywordflow">continue</span>;
00097       }
00098 
00099       <span class="comment">// Dump task parameters</span>
00100       status = par.<a class="code" href="classsource_identify_1_1_parameters.html#a3">dump</a>(status);
00101       <span class="keywordflow">if</span> (status != STATUS_OK) {
00102         <span class="keywordflow">if</span> (par.<a class="code" href="classsource_identify_1_1_parameters.html#a4">logTerse</a>())
00103           <a class="code" href="namespacesource_identify.html#a36">Log</a>(Error_3, <span class="stringliteral">"%d : Error while dumping task parameters."</span>, status);      
00104         <span class="keywordflow">continue</span>;
00105       }
00106        
00107       <span class="comment">// Build counterpart catalogue</span>
00108       status = cat.<a class="code" href="classsource_identify_1_1_catalogue.html#a2">build</a>(&amp;par, status);
00109       <span class="keywordflow">if</span> (status != STATUS_OK) {
00110         <span class="keywordflow">if</span> (par.<a class="code" href="classsource_identify_1_1_parameters.html#a4">logTerse</a>())
00111           <a class="code" href="namespacesource_identify.html#a36">Log</a>(Error_3, <span class="stringliteral">"%d : Error while building counterpart candidate"</span>
00112                        <span class="stringliteral">" catalogue."</span>, status);      
00113         <span class="keywordflow">continue</span>;
00114       }
00115 
00116       <span class="comment">// Save counterpart candidate catalogue</span>
00117       status = cat.<a class="code" href="classsource_identify_1_1_catalogue.html#a3">save</a>(&amp;par, status);
00118       <span class="keywordflow">if</span> (status != STATUS_OK) {
00119         <span class="keywordflow">if</span> (par.<a class="code" href="classsource_identify_1_1_parameters.html#a4">logTerse</a>())
00120           <a class="code" href="namespacesource_identify.html#a36">Log</a>(Error_3, <span class="stringliteral">"%d : Error while saving counterpart candidate"</span>
00121                        <span class="stringliteral">" catalogue."</span>, status);      
00122         <span class="keywordflow">continue</span>;
00123       }
00124 
00125     } <span class="keywordflow">while</span> (0); <span class="comment">// End of main do-loop</span>
00126  
00127     <span class="comment">// Save the execution stop time and calculate elapsed time</span>
00128     t_stop = clock();
00129     t_elapse = (float)(t_stop - t_start) / (float)CLOCKS_PER_SEC;
00130 
00131     <span class="comment">// Dump termination message</span>
00132     <a class="code" href="namespacesource_identify.html#a36">Log</a>(Log_1, <span class="stringliteral">"Task terminated using %.3f sec CPU time."</span>, t_elapse);
00133    
00134     <span class="comment">// Finish log file</span>
00135     status = <a class="code" href="namespacesource_identify.html#a35">LogClose</a>(status);
00136     
00137     <span class="comment">// Return from task</span>
00138 <span class="comment">//    return 0;</span>
00139 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="r0" doxytag="application::m_f"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">st_stream::StreamFormatter <a class="el" href="classapplication.html#r0">application::m_f</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="source_identify_8cxx-source.html#l00141">141</a> of file <a class="el" href="source_identify_8cxx-source.html">sourceIdentify.cxx</a>.
<p>
Referenced by <a class="el" href="source_identify_8cxx-source.html#l00048">application()</a>.    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="source_identify_8cxx-source.html">sourceIdentify.cxx</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Wed Feb 1 17:08:57 2006 for sourceIdentify by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.1 </small></address>
</body>
</html>
